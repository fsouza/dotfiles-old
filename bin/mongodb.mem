#!/bin/csh -ef

set command="${1}"
set pidfile="/usr/local/var/mongodb/xikinbook.pid"
set logfile="/Volumes/mongodb/xikinboook.err"

if ${command} == "start" then
    diskutil erasevolume HFS+ "mongodb" `hdiutil attach -nomount ram://2330860`
    mongod --logpath ${logfile} --pidfilepath ${pidfile} --dbpath /Volumes/mongodb --fork
else if ${command} == "stop" then
    if -f ${pidfile} then
        kill -TERM `cat ${pidfile}`
    endif
    hdiutil detach /Volumes/mongodb
endif
